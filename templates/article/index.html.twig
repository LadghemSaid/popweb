{% extends '/base.html.twig' %}

{% block title %}
    Blog
{% endblock %}

{% block style_custom %}

    <style>

    </style>
{% endblock %}
{% block body %}
    <div class="img-banner">
        <img src="{{ asset('pho/banner-blog.jpg') }}" alt="Bannière blog" class="banner">
        <div class="text">
            <h1>Notre aide</h1>
            <p>Découvrez l'aide que l'on vous apporte.</p>
        </div>
    </div>

    <div class="container">
        <div class="jumbotron">
            <h1>On peut vous renseigner sur les sujets suivants :</h1>
        </div>
        <div class="row">
{% dump(articles) %}
            {% for article in articles %}

                <div class="col-sm-4 article-item">
                    <a href="{{ path('article.show',{'slug':article.slug}) }}">
                        <img class="d-block lazyload "
                             src="{{ asset("img/low_res.jpg") }}"
                             data-src="{{ app_path_articles_images }}{{ article.image }}"
                             alt="AlternateText"
                        />
                    </a>

                    <a href="{{ path('article.show',{'slug':article.slug}) }}">
                        <h2> {{ article.title|striptags|length >20 ? article.title|striptags|slice(0, 50) ~ '...' : article.title|striptags }} </h2>
                    </a>
                    <p class="p-date" data-date="{{ article.updatedAt| date('U') }}"></p>
                    {% dump(article) %}
                    <p class="p-description">{{ article.text|striptags|length > 100 ? article.text|striptags|slice(0, 100) ~ '...' : article.text|striptags }}</p>
                    <a href="{{ path('article.show',{'slug':article.slug}) }}" class="more">Voir plus</a>
                </div>



            {% endfor %}
            {% if articles|length == 0 %}
                <div class="fullHeight">
                    <p>Les articles seront bientot en ligne :)</p>
                </div>
            {% endif %}
        </div>

    </div>


{% endblock %}


  {% block javascripts %}
      <script>

          document.addEventListener("DOMContentLoaded", function(event) {
              $(function(){
                  moment.locale('fr');
                  $(".p-date").html(moment.unix($(this).dataset.date).local().fromNow());
              });
          });





      </script>
  {% endblock %}
